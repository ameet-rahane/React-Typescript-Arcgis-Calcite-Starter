{"ast":null,"code":"import { h, H as Host } from \"./index-527d390a.js\";\nimport { f as focusElement, c as getSlotted, g as getElementDir, a as getElementTheme } from \"./dom-d9ba1da4.js\";\nimport { d as debounce } from \"./debounce-4dee3b1c.js\";\nimport { g as getRoundRobinIndex } from \"./array-af19adb2.js\";\nimport { C as CSS } from \"./resources-e06851d2.js\";\n\nfunction mutationObserverCallback() {\n  this.setUpItems();\n  this.setUpFilter();\n}\n\nvar SUPPORTED_ARROW_KEYS = [\"ArrowUp\", \"ArrowDown\"];\n\nfunction initialize() {\n  this.setUpItems();\n  this.setUpFilter();\n  this.emitCalciteListChange = debounce(internalCalciteListChangeEvent.bind(this), 0);\n}\n\nfunction initializeObserver() {\n  this.observer.observe(this.el, {\n    childList: true,\n    subtree: true\n  });\n}\n\nfunction cleanUpObserver() {\n  this.observer.disconnect();\n}\n\nfunction calciteListItemChangeHandler(e) {\n  var t = this.selectedValues;\n  var i = e.detail,\n      a = i.item,\n      l = i.value,\n      n = i.selected,\n      r = i.shiftPressed;\n\n  if (n) {\n    if (!this.multiple) {\n      this.deselectSiblingItems(a);\n    }\n\n    if (this.multiple && r) {\n      this.selectSiblings(a);\n    }\n\n    t.set(l, a);\n  } else {\n    t.delete(l);\n\n    if (this.multiple && r) {\n      this.selectSiblings(a, true);\n    }\n  }\n\n  if (!this.multiple) {\n    toggleSingleSelectItemTabbing(a, n);\n  }\n\n  this.lastSelectedItem = a;\n  this.emitCalciteListChange();\n}\n\nfunction calciteListItemValueChangeHandler(e) {\n  e.stopPropagation();\n  var t = e.detail.oldValue;\n  var i = this.selectedValues;\n\n  if (i.has(t)) {\n    var a = i.get(t);\n    i.delete(t);\n    i.set(e.detail.newValue, a);\n  }\n}\n\nfunction isValidNavigationKey(e) {\n  return !!SUPPORTED_ARROW_KEYS.find(function (t) {\n    return t === e;\n  });\n}\n\nfunction keyDownHandler(e) {\n  var t = e.key,\n      i = e.target;\n\n  if (!isValidNavigationKey(t)) {\n    return;\n  }\n\n  var a = this,\n      l = a.items,\n      n = a.multiple;\n  var r = l.length;\n  var s = l.indexOf(i);\n\n  if (!r || s === -1) {\n    return;\n  }\n\n  e.preventDefault();\n  var o = getRoundRobinIndex(s + (t === \"ArrowUp\" ? -1 : 1), r);\n  var u = l[o];\n  toggleSingleSelectItemTabbing(u, true);\n  focusElement(u);\n\n  if (!n) {\n    u.selected = true;\n  }\n}\n\nfunction internalCalciteListChangeEvent() {\n  this.calciteListChange.emit(this.selectedValues);\n}\n\nfunction removeItem(e) {\n  if (e.defaultPrevented) {\n    return;\n  }\n\n  var t = e.target;\n  var i = this.selectedValues;\n\n  if (t.parentElement.tagName === \"CALCITE-PICK-LIST-GROUP\") {\n    t.parentElement.remove();\n    Array.from(t.parentElement.children).forEach(function (e) {\n      return i.delete(e.value);\n    });\n  } else {\n    t.remove();\n    i.delete(t.value);\n  }\n\n  this.emitCalciteListChange();\n}\n\nfunction toggleSingleSelectItemTabbing(e, t) {\n  if (t) {\n    e.removeAttribute(\"tabindex\");\n  } else {\n    e.setAttribute(\"tabindex\", \"-1\");\n  }\n}\n\nfunction setFocus() {\n  var e = this,\n      t = e.multiple,\n      i = e.items;\n\n  if (i.length === 0) {\n    return;\n  }\n\n  if (t) {\n    return i[0].setFocus();\n  }\n\n  var a = i.find(function (e) {\n    return e.selected;\n  });\n  return (a ? a : i[0]).setFocus();\n}\n\nfunction setUpItems(e) {\n  var t = this;\n  this.items = Array.from(this.el.querySelectorAll(e));\n  var i = false;\n  var a = this.items;\n  a.forEach(function (e) {\n    e.icon = t.getIconType();\n\n    if (!t.multiple) {\n      e.disableDeselect = true;\n      toggleSingleSelectItemTabbing(e, false);\n    }\n\n    if (e.selected) {\n      i = true;\n      toggleSingleSelectItemTabbing(e, true);\n      t.selectedValues.set(e.value, e);\n    }\n  });\n  var l = a[0];\n\n  if (!i && l) {\n    toggleSingleSelectItemTabbing(l, true);\n  }\n}\n\nfunction deselectSiblingItems(e) {\n  var t = this;\n  this.items.forEach(function (i) {\n    if (i.value !== e.value) {\n      i.toggleSelected(false);\n\n      if (t.selectedValues.has(i.value)) {\n        t.selectedValues.delete(i.value);\n      }\n    }\n  });\n}\n\nfunction selectSiblings(e, t) {\n  var i = this;\n\n  if (t === void 0) {\n    t = false;\n  }\n\n  if (!this.lastSelectedItem) {\n    return;\n  }\n\n  var a = this.items;\n  var l = a.findIndex(function (e) {\n    return e.value === i.lastSelectedItem.value;\n  });\n  var n = a.findIndex(function (t) {\n    return t.value === e.value;\n  });\n  a.slice(Math.min(l, n), Math.max(l, n)).forEach(function (e) {\n    e.toggleSelected(!t);\n\n    if (!t) {\n      i.selectedValues.set(e.value, e);\n    } else {\n      i.selectedValues.delete(e.value);\n    }\n  });\n}\n\nvar groups;\n\nfunction handleFilter(e) {\n  var t = e.detail;\n  var i = t.map(function (e) {\n    return e.value;\n  });\n\n  if (!groups) {\n    groups = new Set();\n  }\n\n  var a = this.items.filter(function (e) {\n    var t = e.parentElement;\n    var a = t.matches(\"calcite-pick-list-group\");\n\n    if (a) {\n      groups.add(t);\n    }\n\n    var l = i.includes(e.value);\n    e.hidden = !l;\n    return l;\n  });\n  groups.forEach(function (e) {\n    var t = a.some(function (t) {\n      return e.contains(t);\n    });\n    e.hidden = !t;\n\n    if (!t) {\n      return;\n    }\n\n    var i = getSlotted(e, \"parent-item\");\n\n    if (i) {\n      i.hidden = false;\n\n      if (a.includes(i)) {\n        Array.from(e.children).forEach(function (e) {\n          return e.hidden = false;\n        });\n      }\n    }\n  });\n  groups.clear();\n}\n\nfunction getItemData() {\n  return this.items.map(function (e) {\n    return {\n      label: e.label,\n      description: e.description,\n      metadata: e.metadata,\n      value: e.value\n    };\n  });\n}\n\nvar __rest = undefined && undefined.__rest || function (e, t) {\n  var i = {};\n\n  for (var a in e) if (Object.prototype.hasOwnProperty.call(e, a) && t.indexOf(a) < 0) i[a] = e[a];\n\n  if (e != null && typeof Object.getOwnPropertySymbols === \"function\") for (var l = 0, a = Object.getOwnPropertySymbols(e); l < a.length; l++) {\n    if (t.indexOf(a[l]) < 0 && Object.prototype.propertyIsEnumerable.call(e, a[l])) i[a[l]] = e[a[l]];\n  }\n  return i;\n};\n\nvar List = function (e) {\n  var t;\n\n  var i = e.props,\n      a = i.disabled,\n      l = i.loading,\n      n = i.filterEnabled,\n      r = i.dataForFilter,\n      s = i.handleFilter,\n      o = i.filterPlaceholder,\n      u = i.el,\n      c = __rest(e, [\"props\"]);\n\n  var d = h(\"slot\", null);\n  return h(Host, Object.assign({\n    \"aria-busy\": l.toString(),\n    \"aria-disabled\": a.toString(),\n    role: \"menu\"\n  }, c), h(\"section\", null, h(\"header\", {\n    class: (t = {}, t[CSS.sticky] = true, t)\n  }, n ? h(\"calcite-filter\", {\n    \"aria-label\": o,\n    data: r,\n    dir: getElementDir(u),\n    onCalciteFilterChange: s,\n    placeholder: o\n  }) : null, h(\"slot\", {\n    name: \"menu-actions\"\n  })), l || a ? h(\"calcite-scrim\", {\n    loading: l,\n    theme: getElementTheme(u)\n  }, d) : d));\n};\n\nexport { List as L, initializeObserver as a, calciteListItemChangeHandler as b, cleanUpObserver as c, deselectSiblingItems as d, calciteListItemValueChangeHandler as e, setUpItems as f, getItemData as g, handleFilter as h, initialize as i, setFocus as j, keyDownHandler as k, mutationObserverCallback as m, removeItem as r, selectSiblings as s };","map":{"version":3,"sources":["/Users/ameetrahane/Desktop/ESRI/calcite-components-examples/react/node_modules/@esri/calcite-components/dist/esm-es5/shared-list-render-4af49cd0.js"],"names":["h","H","Host","f","focusElement","c","getSlotted","g","getElementDir","a","getElementTheme","d","debounce","getRoundRobinIndex","C","CSS","mutationObserverCallback","setUpItems","setUpFilter","SUPPORTED_ARROW_KEYS","initialize","emitCalciteListChange","internalCalciteListChangeEvent","bind","initializeObserver","observer","observe","el","childList","subtree","cleanUpObserver","disconnect","calciteListItemChangeHandler","e","t","selectedValues","i","detail","item","l","value","n","selected","r","shiftPressed","multiple","deselectSiblingItems","selectSiblings","set","delete","toggleSingleSelectItemTabbing","lastSelectedItem","calciteListItemValueChangeHandler","stopPropagation","oldValue","has","get","newValue","isValidNavigationKey","find","keyDownHandler","key","target","items","length","s","indexOf","preventDefault","o","u","calciteListChange","emit","removeItem","defaultPrevented","parentElement","tagName","remove","Array","from","children","forEach","removeAttribute","setAttribute","setFocus","querySelectorAll","icon","getIconType","disableDeselect","toggleSelected","findIndex","slice","Math","min","max","groups","handleFilter","map","Set","filter","matches","add","includes","hidden","some","contains","clear","getItemData","label","description","metadata","__rest","undefined","Object","prototype","hasOwnProperty","call","getOwnPropertySymbols","propertyIsEnumerable","List","props","disabled","loading","filterEnabled","dataForFilter","filterPlaceholder","assign","toString","role","class","sticky","data","dir","onCalciteFilterChange","placeholder","name","theme","L","b","j","k","m"],"mappings":"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","sourcesContent":["import{h,H as Host}from\"./index-527d390a.js\";import{f as focusElement,c as getSlotted,g as getElementDir,a as getElementTheme}from\"./dom-d9ba1da4.js\";import{d as debounce}from\"./debounce-4dee3b1c.js\";import{g as getRoundRobinIndex}from\"./array-af19adb2.js\";import{C as CSS}from\"./resources-e06851d2.js\";function mutationObserverCallback(){this.setUpItems();this.setUpFilter()}var SUPPORTED_ARROW_KEYS=[\"ArrowUp\",\"ArrowDown\"];function initialize(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=debounce(internalCalciteListChangeEvent.bind(this),0)}function initializeObserver(){this.observer.observe(this.el,{childList:true,subtree:true})}function cleanUpObserver(){this.observer.disconnect()}function calciteListItemChangeHandler(e){var t=this.selectedValues;var i=e.detail,a=i.item,l=i.value,n=i.selected,r=i.shiftPressed;if(n){if(!this.multiple){this.deselectSiblingItems(a)}if(this.multiple&&r){this.selectSiblings(a)}t.set(l,a)}else{t.delete(l);if(this.multiple&&r){this.selectSiblings(a,true)}}if(!this.multiple){toggleSingleSelectItemTabbing(a,n)}this.lastSelectedItem=a;this.emitCalciteListChange()}function calciteListItemValueChangeHandler(e){e.stopPropagation();var t=e.detail.oldValue;var i=this.selectedValues;if(i.has(t)){var a=i.get(t);i.delete(t);i.set(e.detail.newValue,a)}}function isValidNavigationKey(e){return!!SUPPORTED_ARROW_KEYS.find((function(t){return t===e}))}function keyDownHandler(e){var t=e.key,i=e.target;if(!isValidNavigationKey(t)){return}var a=this,l=a.items,n=a.multiple;var r=l.length;var s=l.indexOf(i);if(!r||s===-1){return}e.preventDefault();var o=getRoundRobinIndex(s+(t===\"ArrowUp\"?-1:1),r);var u=l[o];toggleSingleSelectItemTabbing(u,true);focusElement(u);if(!n){u.selected=true}}function internalCalciteListChangeEvent(){this.calciteListChange.emit(this.selectedValues)}function removeItem(e){if(e.defaultPrevented){return}var t=e.target;var i=this.selectedValues;if(t.parentElement.tagName===\"CALCITE-PICK-LIST-GROUP\"){t.parentElement.remove();Array.from(t.parentElement.children).forEach((function(e){return i.delete(e.value)}))}else{t.remove();i.delete(t.value)}this.emitCalciteListChange()}function toggleSingleSelectItemTabbing(e,t){if(t){e.removeAttribute(\"tabindex\")}else{e.setAttribute(\"tabindex\",\"-1\")}}function setFocus(){var e=this,t=e.multiple,i=e.items;if(i.length===0){return}if(t){return i[0].setFocus()}var a=i.find((function(e){return e.selected}));return(a?a:i[0]).setFocus()}function setUpItems(e){var t=this;this.items=Array.from(this.el.querySelectorAll(e));var i=false;var a=this.items;a.forEach((function(e){e.icon=t.getIconType();if(!t.multiple){e.disableDeselect=true;toggleSingleSelectItemTabbing(e,false)}if(e.selected){i=true;toggleSingleSelectItemTabbing(e,true);t.selectedValues.set(e.value,e)}}));var l=a[0];if(!i&&l){toggleSingleSelectItemTabbing(l,true)}}function deselectSiblingItems(e){var t=this;this.items.forEach((function(i){if(i.value!==e.value){i.toggleSelected(false);if(t.selectedValues.has(i.value)){t.selectedValues.delete(i.value)}}}))}function selectSiblings(e,t){var i=this;if(t===void 0){t=false}if(!this.lastSelectedItem){return}var a=this.items;var l=a.findIndex((function(e){return e.value===i.lastSelectedItem.value}));var n=a.findIndex((function(t){return t.value===e.value}));a.slice(Math.min(l,n),Math.max(l,n)).forEach((function(e){e.toggleSelected(!t);if(!t){i.selectedValues.set(e.value,e)}else{i.selectedValues.delete(e.value)}}))}var groups;function handleFilter(e){var t=e.detail;var i=t.map((function(e){return e.value}));if(!groups){groups=new Set}var a=this.items.filter((function(e){var t=e.parentElement;var a=t.matches(\"calcite-pick-list-group\");if(a){groups.add(t)}var l=i.includes(e.value);e.hidden=!l;return l}));groups.forEach((function(e){var t=a.some((function(t){return e.contains(t)}));e.hidden=!t;if(!t){return}var i=getSlotted(e,\"parent-item\");if(i){i.hidden=false;if(a.includes(i)){Array.from(e.children).forEach((function(e){return e.hidden=false}))}}}));groups.clear()}function getItemData(){return this.items.map((function(e){return{label:e.label,description:e.description,metadata:e.metadata,value:e.value}}))}var __rest=undefined&&undefined.__rest||function(e,t){var i={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0)i[a]=e[a];if(e!=null&&typeof Object.getOwnPropertySymbols===\"function\")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++){if(t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l]))i[a[l]]=e[a[l]]}return i};var List=function(e){var t;var i=e.props,a=i.disabled,l=i.loading,n=i.filterEnabled,r=i.dataForFilter,s=i.handleFilter,o=i.filterPlaceholder,u=i.el,c=__rest(e,[\"props\"]);var d=h(\"slot\",null);return h(Host,Object.assign({\"aria-busy\":l.toString(),\"aria-disabled\":a.toString(),role:\"menu\"},c),h(\"section\",null,h(\"header\",{class:(t={},t[CSS.sticky]=true,t)},n?h(\"calcite-filter\",{\"aria-label\":o,data:r,dir:getElementDir(u),onCalciteFilterChange:s,placeholder:o}):null,h(\"slot\",{name:\"menu-actions\"})),l||a?h(\"calcite-scrim\",{loading:l,theme:getElementTheme(u)},d):d))};export{List as L,initializeObserver as a,calciteListItemChangeHandler as b,cleanUpObserver as c,deselectSiblingItems as d,calciteListItemValueChangeHandler as e,setUpItems as f,getItemData as g,handleFilter as h,initialize as i,setFocus as j,keyDownHandler as k,mutationObserverCallback as m,removeItem as r,selectSiblings as s};"]},"metadata":{},"sourceType":"module"}