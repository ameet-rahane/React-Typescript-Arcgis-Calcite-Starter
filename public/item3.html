<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ESRI Assignment 1 - Ameet Rahane</title>
        <script type="module" src="https://unpkg.com/@esri/calcite-components/dist/calcite/calcite.esm.js"></script>
        <link rel="stylesheet" type="text/css" href="https://unpkg.com/@esri/calcite-components/dist/calcite/calcite.css" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    </head>
    <body>
        <calcite-shell dir="ltr" class="calcite-theme-light">
            <header slot="header">
                <h2 style = "margin: 1% 1% 1% 1%; font-size: 150%;"><a href="index.html">ESRI Assignment 1 - Ameet Rahane</a></h2>
            </header>
            <calcite-shell-panel slot="primary-panel" position="start" detached-height-scale="l" width-scale="m">
                <calcite-action-bar class="calcite-theme-dark" slot="action-bar"></calcite-action-bar>
                <calcite-card>
                    <span slot="subtitle"><div class="mypanel_item1" style = "margin: 10% 10% 10% 10%;"></div></span>
                </calcite-card> 
                
            </calcite-shell-panel>
            <center><div class="mypanel_img" style = "margin: 10% 10% 10% 10%;"></div></center>
            <calcite-shell-center-row height-scale="s" position="end" slot="center-row">
                <div style="width:50vw; background-image:var(--calcite-app-background-content); padding: var(--calcite-app-cap-spacing) var(--calcite-app-side-spacing);"></div>
            </calcite-shell-center-row>
            <calcite-shell-panel slot="contextual-panel" position="end" detached-height-scale="l" width-scale="m">
                <calcite-action-bar class="calcite-theme-light" slot="action-bar">
                </calcite-action-bar>
                <div class="mypanel_name" style = "margin: 10% 10% 10% 10%;"></div>
                <div class="mypanel_desc" style = "margin: 10% 10% 10% 10%;"></div>
            </calcite-shell-panel>
        </calcite-shell>
        <script>
            $.getJSON('http://sampleserver6.arcgisonline.com/arcgis/rest/services?f=pjson', function(data) { 
                var serv = data.services.filter( s => s.type === "ImageServer").map( s => s.name);
                $(".mypanel_item1").append("<p>"+serv[2]+"</p>");
            });
            
            $.getJSON('http://sampleserver6.arcgisonline.com/arcgis/rest/services/Toronto/ImageServer?f=pjson', function(data) {    
                var text_name = `<b>NAME: </b> ${data.name} <br>`
                var text_desciption = `<b>DESCRIPTION: </b> ${data.description}`
                $(".mypanel_name").html(text_name);
                $(".mypanel_desc").html(text_desciption);
            });
            
            $.getJSON('http://sampleserver6.arcgisonline.com/arcgis/rest/services/Toronto/ImageServer/exportImage?bbox=-8844874.0651%2C5401062.402699997%2C-8828990.0651%2C5420947.402699997&bboxSR=&size=&imageSR=&time=&format=jpgpng&pixelType=U16&noData=&noDataInterpretation=esriNoDataMatchAny&interpolation=+RSP_BilinearInterpolation&compression=&compressionQuality=&bandIds=&mosaicRule=&renderingRule=&f=pjson',
            function(data_img) {
                var img = document.createElement('img');        
                img.src = data_img.href;
                $(".mypanel_img").html(img);
            });
        </script>
    </body>
</html>